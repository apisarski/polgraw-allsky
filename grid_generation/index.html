<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../img/favicon.ico">
        <title>Grid generation - Polgraw group</title>
        <link href="../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../css/font-awesome-4.5.0.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="../css/highlight.css">
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        <script src="../js/jquery-1.10.2.min.js"></script>
        <script src="../js/bootstrap-3.0.3.min.js"></script>
        <script src="../js/highlight.pack.js"></script> 
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="..">Polgraw group</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                    <li >
                        <a href="..">Home</a>
                    </li>
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Pipeline description <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="../input_data/">Input data generation</a>
</li>
                            
<li class="active">
    <a href="./">Grid generation</a>
</li>
                            
<li >
    <a href="../search_for_candidates/">F-statistic candidate signal search</a>
</li>
                            
<li >
    <a href="../coincidences/">Coincidences between candidates</a>
</li>
                            
<li >
    <a href="../fap_coincidences/">False alarm probablity of conicidences</a>
</li>
                            
<li >
    <a href="../followup/">Followup of interesting outliers</a>
</li>
                            
<li >
    <a href="../sensitivity_upper_limits/">Sensitivity upper limits</a>
</li>
                            
<li >
    <a href="../pipeline_script/">Pipeline: a minimal example</a>
</li>
                            
<li >
    <a href="../articles/">Documents and publications</a>
</li>
                        </ul>
                    </li>
                </ul>

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                    <li >
                        <a rel="next" href="../input_data/">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../search_for_candidates/">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
            </ul>
        </div>
    </div>
</div>

        <div class="container">
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="main active"><a href="#grid-generation">Grid generation</a></li>
            <li><a href="#implementation-of-optimal-grid-of-templates">Implementation of optimal grid of templates</a></li>
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h1 id="grid-generation">Grid generation</h1>
<h2 id="implementation-of-optimal-grid-of-templates">Implementation of optimal grid of templates</h2>
<p>The implementation of the <a href="http://iopscience.iop.org/article/10.1088/0264-9381/32/14/145014">banks of templates for all-sky narrow-band searches of gravitational waves from spinning neutron stars</a> paper can be found <a href="https://github.com/mbejger/polgraw-allsky/tree/master/gridgen">here</a>.</p>
<h3 id="prerequisites">Prerequisites</h3>
<p>C++ compiler.</p>
<h3 id="example">Example</h3>
<p>Using the <a href="https://polgraw.camk.edu.pl/H1L1_2d_0.25.tar.gz">test Gaussian data</a>:  </p>
<pre class="codehilite"><code>% ./gridgen -m 0.5 -p dfg -d ../testdata/2d_0.25/001/H1/ -n 17 </code></pre>


<p>where   </p>
<ul>
<li><code>-m</code> is the minimal-match parameter</li>
<li><code>-d</code> is the directory with the ephemerids data </li>
<li><code>-n</code> is the <script type="math/tex">\log_2</script> of the number of data points </li>
<li><code>-p</code> denotes the full output (density of covering, Fisher and grid matrices)</li>
</ul>
<p>The output is </p>
<pre class="codehilite"><code class="language-bash">grid.bin will be saved in ../testdata/2d_0.25/001/H1/grid.bin
Covariance, Density of covering
Density of covering: 0.25 1.76768559133
fftpad: 1
Normalized grid matrix:
4.793689962143e-05      0.000000000000e+00      0.000000000000e+00      0.000000000000e+00
-1.742438091399e-04     2.161320668089e-09      0.000000000000e+00      0.000000000000e+00
-2.479053689156e-02     -1.684378936606e-09     2.558634258126e+02      0.000000000000e+00
9.606645586405e-03      3.102095432504e-09      -1.321384079961e+02     1.941709922254e+02

Fisher matrix:
8.333333333333e-02      8.333333333333e-02      8.125315899793e-06      1.296986289673e-06
8.333333333333e-02      8.888888888889e-02      8.127119310149e-06      1.288789877048e-06
8.125315899793e-06      8.127119310149e-06      7.922523031349e-10      1.264584758632e-10
1.296986289673e-06      1.288789877048e-06      1.264584758632e-10      2.020158195389e-11

Grid matrix:
4.130435018981e+00      0.000000000000e+00      0.000000000000e+00      0.000000000000e+00
-1.501354357073e+01     1.604615232547e+01      0.000000000000e+00      0.000000000000e+00
-2.136051820725e+03     -1.250522487924e+01     2.204621622171e+07      0.000000000000e+00
8.277470103070e+02      2.303068516072e+01      -1.138557378658e+07     1.673054937411e+07</code></pre>


<h3 id="full-description-of-options">Full description of options</h3>
<pre class="codehilite"><code class="language-bash">DESCRIPTION
         GridsGenerator (GG) is designated to be used in all-sky narrow-band
         searches of continuous gravitational waves. Program allow to:
         - generate efficient grid(s) for chosen initial time of observation (1).
         - generate reduced Fisher matrix for chosen initial time of observation (1),
         - generate density of covering (2).
         (1) To get result, ephemeris must be provided.
         (2) Result can be get without ephemeris (for more information see flags: -nd
         (--ndata)).

FLAGS
   Flags with (optional) argument(s):
         -c or --covariance &lt;min&gt; &lt;max&gt; &lt;step&gt;
                 Covariance. Flag -c is required (even without argument) to get result.
                 &lt;min&gt; - minimum value of covariance but not less than 0;
                 default set: 0.75.
                 &lt;max&gt; - optional maximum value of covariance but less than 1.
                 &lt;step&gt; - optional step value of covariance;
                 default set: 0.01.

                 # Calculation are preform only in two cases:
                 # 1. No flag are provided. Sets are read from file 'gg.ini'.
                 # Result(s) is(are) printed to file(s) - see configuration file: 'gg.ini'.
                 # 2. Flag -c (--covariance) or -m (--match) is used.
                 # Result(s) is(are) printed to tty.

         -m or --match &lt;min&gt; &lt;max&gt; &lt;step&gt;
                 Minimal match (MM^2 == covariance).
                 &lt;min&gt; - minimum value of minimal match but not less than 0;
                 default set: MM^2 = 0.75.
                 &lt;max&gt; - optional maximum value of minimal match but less than 1.
                 &lt;step&gt; - optional step value of minimal match;
                 default set: 0.1.
                 ## If flags -c (--covariance) and -m (--match) provided simultaneously,
                 ## program will read options from -c flag only.


         -d or --directory &lt;path&gt;
                 Directory containing ephemeris (need to contain binary files:
                 'rSSB.bin', 'rDet.bin', 'rDetSSB.bin').
                 &lt;path&gt; - take path to directory.
                 E.g. -d 001: directory '001' located inside folder with GridsGenerator.
                 If directory is not provided, program will try to find ephemeris
                 in directory with GridsGenerator.

         -i or --initial &lt;min&gt; &lt;max&gt; &lt;step&gt;
                 Initial time of observation.
                 &lt;min&gt; - minimum value of initial time;
                 default set: 0.5.
                 &lt;max&gt; - optional maximum value of initial time.
                 &lt;step&gt; - optional step value of minimal match;
                 if not provided step will be set on step = max - min.


         -a or --algorithm &lt;type&gt;
                 Algorithm type to choose.
                 &lt;type&gt; take option: s1, s2, a. Algorithms:
                 s1 - based on fully analytic formula,
                 s2 - partially numeric formula.
                 Accuracy for algorithm 's2' depended on -na (--nalpha) and -nr (--nradius)
                 flags.
                 a - automatically choose algorithm 's1' or 's2'. Use this argument to allow
                 GridsGenerator to decide which algorithm (for given parameters) should be
                 used to get grid with better density of covering.
                 Information about implemented algorithms can be found in article:
                 http://dx.doi.org/10.1088/0264-9381/32/14/145014
                 Default set: a.

         -n or --nfft &lt;int&gt;
                 Number of Fourier bins.
                 &lt;int&gt; take positive integer number without zero (exponent).
                 E.g. to get grid destined to work with discreet
                 Fourier transform (DFT, FFT) with length 1024 put same exponent of 2: 10
                 (1024 == 2^10).
                 Default set: 20 (1048576 = 2^20).

         -nd or --ndata &lt;int&gt;
                 Number of data (data length collected by detector, equal to length
                 of ephemeris).
                 &lt;int&gt; take positive integer number including zero.
                 If &lt;int&gt; is set to zero data length will be read from ephemeris*.
                 If &lt;int&gt; is bigger than zero program will able to obtain density of
                 covering only**.
                 Default set: 0.
                 * With this set (-nd 0 or -ndata 0) density is obtained without using
                 information stored in file 'dataS2.txt'.
                 ### With this set density of covering for algorithm 's2' is always
                 ### obtaining with maximal accuracy, depending only from flags: -na, -nr.
                 ### Density of covering for algorithm 's1' is always obtained with maximal
                 ### accuracy regardless to sets of -nd flag.
                 ** Ephemeris are not used and because of that grid(s) and reduced Fisher
                 matrix cannot be obtained. Density of covering for algorithm 's2' will be
                 be obtained in approximated way based on information*** collected (in 
                 'dataS2.txt' file) during previous runs with ephemeris. File 'dataS2.txt'
                 collect information about coverings only for algorithm 's2'.
                 Program inform which algorithm has been used only when work without
                 ephemeris (&lt;int&gt; bigger that zero).
                 E.g. (without ephemeris) -nd 344656:
                 Covariance, Density, Algorithm
                 0.86      1.82      s2
                 0.87      1.8494      s1
                 0.88      1.77685      s1
                 E.g. (data length taken from ephemeris) -nd 0:
                 Covariance, Density of covering
                 0.86 1.82299890516
                 0.87 1.84940429814
                 0.88 1.77685017541
                 *** Information stored in file 'dataS2.txt' are independent of ephemeris.
                 Based on this information density of covering can be obtained fast but
                 in approximated way (generally speaking more collected data allows
                 to get more accurate results).

         -na or --nalpha &lt;int&gt;
                 Number of loops (incrementation deep) in root finding algorithm.
                 &lt;int&gt; take positive integer number without zero.
                 This flag affect only on 's2' algorithm.
                 Default set: 35.

         -nr or --nradius &lt;int&gt;
                 Number of loops in covering radius (deep hole) finding algorithm.
                 &lt;int&gt; take positive integer number without zero.
                 This flag affect only on 's2' algorithm.
                 Default set: 20.

         -cv or --convert &lt;bool&gt;
                 Convert grid from space with hyper-sphere to hyper-ellipsoid space.
                 &lt;bool&gt; take argument: t (true), f (false).
                 Default set: t.

         -ch or --chop &lt;bool&gt;
                 Chop result to zero if value of result is smaller than |10^-12|.
                 &lt;bool&gt; take argument: t (true), f (false).
                 Default set: f.

         -p or --print &lt;string&gt;
                 Print result(s).
                 &lt;string&gt; take argument(s): d, f, g.
                 d - density of covering,
                 f - Fisher reduced matrix,
                 g - grid.
                 Option can be joined (order is not important), e.g. df, dg, fg, dfg.
                 Default set: g.
                 #### If argument of flag -nd is set to be bigger than zero, flag -p
                 #### can accept only 'd' argument.

   Flags with no arguments:
         -h or --help
                 Display this help.

         -ht or --helptxt
                 Print this help to text file.

         -v or --version
                 Display information about version of GridsGenerator.

         -aa or --author
                 About author(s). Display information about developer(s).</code></pre></div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>var base_url = '..';</script>
        <script src="../js/base.js"></script>
        <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>
        <script src="../search/require.js"></script>
        <script src="../search/search.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="Keyboard Shortcuts Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Keyboard Shortcuts</h4>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td><kbd>&larr;</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td><kbd>&rarr;</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>


    </body>
</html>
